{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"24237","self":"http://jira.codehaus.org/rest/api/latest/issue/24237","key":"PLXUTILS-21","fields":{"progress":{"progress":0,"total":0},"summary":"sync or replace parts of plexus-utils with Apache commons, Apache Ant...","timetracking":{},"issuetype":{"self":"http://jira.codehaus.org/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"http://jira.codehaus.org/images/icons/issuetypes/improvement.png","name":"Improvement","subtask":false},"customfield_10110":null,"votes":{"self":"http://jira.codehaus.org/rest/api/2/issue/PLXUTILS-21/votes","votes":0,"hasVoted":false},"resolution":null,"fixVersions":[],"resolutiondate":null,"customfield_10210":"0.0","timespent":null,"reporter":{"self":"http://jira.codehaus.org/rest/api/2/user?username=brettporter","name":"brettporter","emailAddress":"brett@apache.org","avatarUrls":{"16x16":"http://jira.codehaus.org/secure/useravatar?size=xsmall&avatarId=10232","24x24":"http://jira.codehaus.org/secure/useravatar?size=small&avatarId=10232","32x32":"http://jira.codehaus.org/secure/useravatar?size=medium&avatarId=10232","48x48":"http://jira.codehaus.org/secure/useravatar?avatarId=10232"},"displayName":"Brett Porter","active":true},"aggregatetimeoriginalestimate":null,"customfield_10161":["brettporter(brettporter)","siveton(siveton)"],"customfield_10160":null,"updated":"2009-01-06T18:49:05.280-0600","created":"2005-05-25T20:07:34.556-0500","description":"glancing over FileUtils, there are opportunities for file handles to leak due to improperly caught exceptions. It is based on a very old version, and it seems to have been fixed in commons-io-1.0.\n\nI suggest we remove these from plexus-utils in the next release and start using commons-io (it will require method signature changes, however). In a lot of cases, this will allow us to drop plexus-utils (a 250k dep down to an 80k dep for commons-io).\n\n\n\n","priority":{"self":"http://jira.codehaus.org/rest/api/2/priority/3","iconUrl":"http://jira.codehaus.org/images/icons/priorities/major.png","name":"Major","id":"3"},"duedate":null,"issuelinks":[],"customfield_10163":"189993600","watches":{"self":"http://jira.codehaus.org/rest/api/2/issue/PLXUTILS-21/watchers","watchCount":0,"isWatching":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"subtasks":[],"status":{"self":"http://jira.codehaus.org/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"http://jira.codehaus.org/images/icons/statuses/open.png","name":"Open","id":"1"},"customfield_10090":null,"labels":[],"workratio":-1,"assignee":null,"attachment":[],"customfield_10221":null,"customfield_10220":null,"customfield_10200":null,"aggregatetimeestimate":null,"customfield_10190":null,"project":{"self":"http://jira.codehaus.org/rest/api/2/project/11432","id":"11432","key":"PLXUTILS","name":"Plexus Utils","avatarUrls":{"16x16":"http://jira.codehaus.org/secure/projectavatar?size=xsmall&pid=11432&avatarId=10011","24x24":"http://jira.codehaus.org/secure/projectavatar?size=small&pid=11432&avatarId=10011","32x32":"http://jira.codehaus.org/secure/projectavatar?size=medium&pid=11432&avatarId=10011","48x48":"http://jira.codehaus.org/secure/projectavatar?pid=11432&avatarId=10011"},"projectCategory":{"self":"http://jira.codehaus.org/rest/api/2/projectCategory/10003","id":"10003","description":"various containers","name":"containers"}},"versions":[],"customfield_10170":null,"environment":null,"timeestimate":null,"customfield_10130":null,"aggregateprogress":{"progress":0,"total":0},"lastViewed":null,"components":[],"comment":{"startAt":0,"maxResults":1,"total":1,"comments":[{"self":"http://jira.codehaus.org/rest/api/2/issue/24237/comment/160182","id":"160182","author":{"self":"http://jira.codehaus.org/rest/api/2/user?username=siveton","name":"siveton","emailAddress":"vincent.siveton@gmail.com","avatarUrls":{"16x16":"http://jira.codehaus.org/secure/useravatar?size=xsmall&avatarId=10232","24x24":"http://jira.codehaus.org/secure/useravatar?size=small&avatarId=10232","32x32":"http://jira.codehaus.org/secure/useravatar?size=medium&avatarId=10232","48x48":"http://jira.codehaus.org/secure/useravatar?avatarId=10232"},"displayName":"Vincent Siveton","active":true},"body":"IMHO I will prefer a general approach, using the shade plugin for instance.\r\n\r\nSome p-u classes could be extended from there original classes, i.e.\r\n\r\n{noformat}\r\norg.codehaus.plexus.util.Base64 => org.apache.commons.codec.binary.Base64\r\norg.codehaus.plexus.util.DirectoryScanner => org.apache.tools.ant.DirectoryScanner\r\norg.codehaus.plexus.util.ExceptionUtils => org.apache.commons.lang.exception.ExceptionUtils\r\norg.codehaus.plexus.util.Expand => org.apache.tools.ant.taskdefs.Expand\r\norg.codehaus.plexus.util.FileUtils => org.apache.commons.io.FileUtils\r\norg.codehaus.plexus.util.IOUtil => org.apache.commons.io.IOUtils\r\norg.codehaus.plexus.util.Os => org.apache.commons.exec.Os (partial)\r\norg.codehaus.plexus.util.SelectorUtils => org.apache.tools.ant.types.selectors.SelectorUtils\r\norg.codehaus.plexus.util.StringInputStream => org.apache.tools.ant.filters.StringInputStream\r\norg.codehaus.plexus.util.StringUtils => org.apache.commons.lang.StringUtils\r\n{noformat}\r\n\r\n*Note*: we need to take care of the implementation of each methods. For instance, StringUtils#isEmpty() has not the same behaviour from commons (no trim()...)\r\n\r\nConfigure the shade plugin for each wanted classes, ie:\r\n\r\n{noformat}\r\n      <plugin>\r\n        <artifactId>maven-shade-plugin</artifactId>\r\n        <executions>\r\n          <execution>\r\n            <id>shade</id>\r\n            <goals>\r\n              <goal>shade</goal>\r\n            </goals>\r\n            <configuration>\r\n              <artifactSet>\r\n                <includes>\r\n                  <include>org.codehaus.plexus:plexus-interpolation</include>\r\n                  <include>commons-lang:commons-lang</include>\r\n                </includes>\r\n              </artifactSet>\r\n              <relocations>\r\n                <relocation>\r\n                  <pattern>org.codehaus.plexus.interpolation</pattern>\r\n                </relocation>\r\n                <relocation>\r\n                  <pattern>org.apache.commons.lang</pattern>\r\n                </relocation>\r\n              </relocations>\r\n              <filters>\r\n                <filter>\r\n                  <artifact>commons-lang:commons-lang</artifact>\r\n                  <includes>\r\n                    <include>org/apache/commons/lang/StringUtils.*</include>\r\n                    <!-- and so on -->\r\n                  </includes>\r\n                </filter>\r\n              </filters>\r\n              <keepDependenciesWithProvidedScope>true</keepDependenciesWithProvidedScope>\r\n            </configuration>\r\n          </execution>\r\n        </executions>\r\n      </plugin>\r\n...\r\n{noformat}","updateAuthor":{"self":"http://jira.codehaus.org/rest/api/2/user?username=siveton","name":"siveton","emailAddress":"vincent.siveton@gmail.com","avatarUrls":{"16x16":"http://jira.codehaus.org/secure/useravatar?size=xsmall&avatarId=10232","24x24":"http://jira.codehaus.org/secure/useravatar?size=small&avatarId=10232","32x32":"http://jira.codehaus.org/secure/useravatar?size=medium&avatarId=10232","48x48":"http://jira.codehaus.org/secure/useravatar?avatarId=10232"},"displayName":"Vincent Siveton","active":true},"created":"2009-01-06T18:49:05.252-0600","updated":"2009-01-06T18:49:05.252-0600"}]},"timeoriginalestimate":null,"aggregatetimespent":null}}