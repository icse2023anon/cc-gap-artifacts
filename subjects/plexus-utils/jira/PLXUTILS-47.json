{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"55898","self":"http://jira.codehaus.org/rest/api/latest/issue/55898","key":"PLXUTILS-47","fields":{"progress":{"progress":0,"total":1800,"percent":0},"summary":"FileUtils.basename( filename ) blows up due to false assumptions about inputs","timetracking":{"originalEstimate":"30m","remainingEstimate":"30m","originalEstimateSeconds":1800,"remainingEstimateSeconds":1800},"issuetype":{"self":"http://jira.codehaus.org/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"http://jira.codehaus.org/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"customfield_10110":null,"votes":{"self":"http://jira.codehaus.org/rest/api/2/issue/PLXUTILS-47/votes","votes":1,"hasVoted":false},"resolution":{"self":"http://jira.codehaus.org/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"fixVersions":[{"self":"http://jira.codehaus.org/rest/api/2/version/14036","id":"14036","description":"","name":"1.5","archived":false,"released":true,"releaseDate":"2008-02-18"}],"resolutiondate":"2008-02-12T15:55:27.034-0600","customfield_10210":"1.0","timespent":null,"reporter":{"self":"http://jira.codehaus.org/rest/api/2/user?username=skaze","name":"skaze","emailAddress":"skazer@gmail.com","avatarUrls":{"16x16":"http://jira.codehaus.org/secure/useravatar?size=xsmall&avatarId=10232","24x24":"http://jira.codehaus.org/secure/useravatar?size=small&avatarId=10232","32x32":"http://jira.codehaus.org/secure/useravatar?size=medium&avatarId=10232","48x48":"http://jira.codehaus.org/secure/useravatar?avatarId=10232"},"displayName":"John Allen","active":true},"aggregatetimeoriginalestimate":1800,"customfield_10161":["bentmann(bentmann)","jburrell(jburrell)","skaze(skaze)","olamy(olamy)"],"customfield_10160":null,"updated":"2008-02-12T15:55:26.838-0600","created":"2007-09-06T12:54:38.428-0500","description":"Can you spot the deliberate mistake?\n\n{code}\n    /**\n     * Returns the filename portion of a file specification string.\n     * Matches the equally named unix command.\n     * @return The filename string without extension.\n     */\n    public static String basename( String filename )\n    {\n        return basename( filename, extension( filename ) );\n    }\n{code}\n\nSo we pass in a full filename but if it contains a DOT '.' in the path we're screwed. Why? Because extension( filename ) is naive in its implementation...\n\n{code}\n   /**\n     * Returns the extension portion of a file specification string.\n     * This everything after the last dot '.' in the filename (NOT including\n     * the dot).\n     */\n    public static String extension( String filename )\n    {\n        int lastDot = filename.lastIndexOf( '.' );\n\n        if ( lastDot >= 0 )\n        {\n            return filename.substring( lastDot + 1 );\n        }\n        else\n        {\n            return \"\";\n        }\n    }\n{code}\n\nSo the search for the holy '.' does not properly stop when it meets a file separator. Instead it keeps on looking until it finds one, period.\n\nYou could argue that you're supposed to pass only a filename in BUT as basename uses it and basename is all about directories and filenames that don't hold up.\n\nSimple fix, change extension() to not be so stupid.","priority":{"self":"http://jira.codehaus.org/rest/api/2/priority/2","iconUrl":"http://jira.codehaus.org/images/icons/priorities/critical.png","name":"Critical","id":"2"},"duedate":null,"issuelinks":[],"customfield_10163":"218419200","watches":{"self":"http://jira.codehaus.org/rest/api/2/issue/PLXUTILS-47/watchers","watchCount":1,"isWatching":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"subtasks":[],"status":{"self":"http://jira.codehaus.org/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"http://jira.codehaus.org/images/icons/statuses/closed.png","name":"Closed","id":"6"},"customfield_10090":null,"labels":[],"workratio":0,"assignee":{"self":"http://jira.codehaus.org/rest/api/2/user?username=olamy","name":"olamy","emailAddress":"olamy@apache.org","avatarUrls":{"16x16":"http://jira.codehaus.org/secure/useravatar?size=xsmall&avatarId=10232","24x24":"http://jira.codehaus.org/secure/useravatar?size=small&avatarId=10232","32x32":"http://jira.codehaus.org/secure/useravatar?size=medium&avatarId=10232","48x48":"http://jira.codehaus.org/secure/useravatar?avatarId=10232"},"displayName":"Olivier Lamy","active":true},"attachment":[{"self":"http://jira.codehaus.org/rest/api/2/attachment/29521","id":"29521","filename":"PLXUTILS-47.patch","author":{"self":"http://jira.codehaus.org/rest/api/2/user?username=jburrell","name":"jburrell","emailAddress":"jamieburrell@gmail.com","avatarUrls":{"16x16":"http://jira.codehaus.org/secure/useravatar?size=xsmall&avatarId=10232","24x24":"http://jira.codehaus.org/secure/useravatar?size=small&avatarId=10232","32x32":"http://jira.codehaus.org/secure/useravatar?size=medium&avatarId=10232","48x48":"http://jira.codehaus.org/secure/useravatar?avatarId=10232"},"displayName":"Jamie Burrell","active":true},"created":"2007-09-20T07:37:53.981-0500","size":7075,"mimeType":"text/plain","content":"http://jira.codehaus.org/secure/attachment/29521/PLXUTILS-47.patch"}],"customfield_10221":null,"customfield_10220":null,"customfield_10200":null,"aggregatetimeestimate":1800,"customfield_10190":null,"project":{"self":"http://jira.codehaus.org/rest/api/2/project/11432","id":"11432","key":"PLXUTILS","name":"Plexus Utils","avatarUrls":{"16x16":"http://jira.codehaus.org/secure/projectavatar?size=xsmall&pid=11432&avatarId=10011","24x24":"http://jira.codehaus.org/secure/projectavatar?size=small&pid=11432&avatarId=10011","32x32":"http://jira.codehaus.org/secure/projectavatar?size=medium&pid=11432&avatarId=10011","48x48":"http://jira.codehaus.org/secure/projectavatar?pid=11432&avatarId=10011"},"projectCategory":{"self":"http://jira.codehaus.org/rest/api/2/projectCategory/10003","id":"10003","description":"various containers","name":"containers"}},"versions":[],"customfield_10170":null,"environment":null,"timeestimate":1800,"customfield_10130":null,"aggregateprogress":{"progress":0,"total":1800,"percent":0},"lastViewed":null,"components":[],"comment":{"startAt":0,"maxResults":4,"total":4,"comments":[{"self":"http://jira.codehaus.org/rest/api/2/issue/55898/comment/107819","id":"107819","author":{"self":"http://jira.codehaus.org/rest/api/2/user?username=jburrell","name":"jburrell","emailAddress":"jamieburrell@gmail.com","avatarUrls":{"16x16":"http://jira.codehaus.org/secure/useravatar?size=xsmall&avatarId=10232","24x24":"http://jira.codehaus.org/secure/useravatar?size=small&avatarId=10232","32x32":"http://jira.codehaus.org/secure/useravatar?size=medium&avatarId=10232","48x48":"http://jira.codehaus.org/secure/useravatar?avatarId=10232"},"displayName":"Jamie Burrell","active":true},"body":"Patched.  \r\nThere are two methods in FileUtils that do the same thing (at least that's the way it looks) - extension and getExtension.  Both suffered from this issue, so I have fixed extension and pointed getExtension to it.\r\nI have also edited the (previously disabled) unit test testGetExtensionsWithPaths, as the utilities are dependent on File.separator, which varies by platform.  This means that running the test on Unix against Windows paths obviously fails.  These now all pass successfully.\r\n","updateAuthor":{"self":"http://jira.codehaus.org/rest/api/2/user?username=jburrell","name":"jburrell","emailAddress":"jamieburrell@gmail.com","avatarUrls":{"16x16":"http://jira.codehaus.org/secure/useravatar?size=xsmall&avatarId=10232","24x24":"http://jira.codehaus.org/secure/useravatar?size=small&avatarId=10232","32x32":"http://jira.codehaus.org/secure/useravatar?size=medium&avatarId=10232","48x48":"http://jira.codehaus.org/secure/useravatar?avatarId=10232"},"displayName":"Jamie Burrell","active":true},"created":"2007-09-20T07:19:06.052-0500","updated":"2007-09-20T07:19:06.052-0500"},{"self":"http://jira.codehaus.org/rest/api/2/issue/55898/comment/107825","id":"107825","author":{"self":"http://jira.codehaus.org/rest/api/2/user?username=jburrell","name":"jburrell","emailAddress":"jamieburrell@gmail.com","avatarUrls":{"16x16":"http://jira.codehaus.org/secure/useravatar?size=xsmall&avatarId=10232","24x24":"http://jira.codehaus.org/secure/useravatar?size=small&avatarId=10232","32x32":"http://jira.codehaus.org/secure/useravatar?size=medium&avatarId=10232","48x48":"http://jira.codehaus.org/secure/useravatar?avatarId=10232"},"displayName":"Jamie Burrell","active":true},"body":"Apologies - just after previous patch upload, I noticed removeExtension had the same problem.  That is now fixed too.","updateAuthor":{"self":"http://jira.codehaus.org/rest/api/2/user?username=jburrell","name":"jburrell","emailAddress":"jamieburrell@gmail.com","avatarUrls":{"16x16":"http://jira.codehaus.org/secure/useravatar?size=xsmall&avatarId=10232","24x24":"http://jira.codehaus.org/secure/useravatar?size=small&avatarId=10232","32x32":"http://jira.codehaus.org/secure/useravatar?size=medium&avatarId=10232","48x48":"http://jira.codehaus.org/secure/useravatar?avatarId=10232"},"displayName":"Jamie Burrell","active":true},"created":"2007-09-20T07:37:53.991-0500","updated":"2007-09-20T07:37:53.991-0500"},{"self":"http://jira.codehaus.org/rest/api/2/issue/55898/comment/123298","id":"123298","author":{"self":"http://jira.codehaus.org/rest/api/2/user?username=bentmann","name":"bentmann","emailAddress":"benjamin.bentmann@udo.edu","avatarUrls":{"16x16":"http://jira.codehaus.org/secure/useravatar?size=xsmall&avatarId=10232","24x24":"http://jira.codehaus.org/secure/useravatar?size=small&avatarId=10232","32x32":"http://jira.codehaus.org/secure/useravatar?size=medium&avatarId=10232","48x48":"http://jira.codehaus.org/secure/useravatar?avatarId=10232"},"displayName":"Benjamin Bentmann","active":true},"body":"Any chances of getting this triviality fixed/released soon? I mean the patch is there...","updateAuthor":{"self":"http://jira.codehaus.org/rest/api/2/user?username=bentmann","name":"bentmann","emailAddress":"benjamin.bentmann@udo.edu","avatarUrls":{"16x16":"http://jira.codehaus.org/secure/useravatar?size=xsmall&avatarId=10232","24x24":"http://jira.codehaus.org/secure/useravatar?size=small&avatarId=10232","32x32":"http://jira.codehaus.org/secure/useravatar?size=medium&avatarId=10232","48x48":"http://jira.codehaus.org/secure/useravatar?avatarId=10232"},"displayName":"Benjamin Bentmann","active":true},"created":"2008-02-11T12:48:33.644-0600","updated":"2008-02-11T12:49:02.143-0600"},{"self":"http://jira.codehaus.org/rest/api/2/issue/55898/comment/123451","id":"123451","author":{"self":"http://jira.codehaus.org/rest/api/2/user?username=olamy","name":"olamy","emailAddress":"olamy@apache.org","avatarUrls":{"16x16":"http://jira.codehaus.org/secure/useravatar?size=xsmall&avatarId=10232","24x24":"http://jira.codehaus.org/secure/useravatar?size=small&avatarId=10232","32x32":"http://jira.codehaus.org/secure/useravatar?size=medium&avatarId=10232","48x48":"http://jira.codehaus.org/secure/useravatar?avatarId=10232"},"displayName":"Olivier Lamy","active":true},"body":"fixed in rev 7197.\r\nThanks","updateAuthor":{"self":"http://jira.codehaus.org/rest/api/2/user?username=olamy","name":"olamy","emailAddress":"olamy@apache.org","avatarUrls":{"16x16":"http://jira.codehaus.org/secure/useravatar?size=xsmall&avatarId=10232","24x24":"http://jira.codehaus.org/secure/useravatar?size=small&avatarId=10232","32x32":"http://jira.codehaus.org/secure/useravatar?size=medium&avatarId=10232","48x48":"http://jira.codehaus.org/secure/useravatar?avatarId=10232"},"displayName":"Olivier Lamy","active":true},"created":"2008-02-12T15:55:26.685-0600","updated":"2008-02-12T15:55:26.685-0600"}]},"timeoriginalestimate":1800,"aggregatetimespent":null}}