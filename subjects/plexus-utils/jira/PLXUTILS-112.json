{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"50086","self":"http://jira.codehaus.org/rest/api/latest/issue/50086","key":"PLXUTILS-112","fields":{"progress":{"progress":0,"total":0},"summary":"Using plexus in maven2 causes a \"too many open files exception\"","timetracking":{},"issuetype":{"self":"http://jira.codehaus.org/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"http://jira.codehaus.org/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"customfield_10110":null,"votes":{"self":"http://jira.codehaus.org/rest/api/2/issue/PLXUTILS-112/votes","votes":1,"hasVoted":false},"resolution":{"self":"http://jira.codehaus.org/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"fixVersions":[{"self":"http://jira.codehaus.org/rest/api/2/version/15318","id":"15318","description":"","name":"1.5.10","archived":false,"released":true,"releaseDate":"2009-05-29"}],"resolutiondate":"2009-05-28T16:45:58.032-0500","customfield_10210":"1.0","timespent":null,"reporter":{"self":"http://jira.codehaus.org/rest/api/2/user?username=ivovandongen","name":"ivovandongen","emailAddress":"ivovandongen@gmail.com","avatarUrls":{"16x16":"http://jira.codehaus.org/secure/useravatar?size=xsmall&avatarId=10232","24x24":"http://jira.codehaus.org/secure/useravatar?size=small&avatarId=10232","32x32":"http://jira.codehaus.org/secure/useravatar?size=medium&avatarId=10232","48x48":"http://jira.codehaus.org/secure/useravatar?avatarId=10232"},"displayName":"Ivo van Dongen","active":true},"aggregatetimeoriginalestimate":null,"customfield_10161":["evenisse(evenisse)","silas1106(silas1106)","ivovandongen(ivovandongen)","rt15(rt15)"],"customfield_10160":null,"updated":"2009-05-28T23:54:37.470-0500","created":"2007-04-19T10:25:59.942-0500","description":"When building large projects we run into a problem in the last stages of a maven2 build. We've alreadye upped the OS limits on open file handles per proces and in general. I've dropped this on the continuum mailinglist at first but they pointed me in this direction.\n\nThe last part of the maven output is:\n\n[INFO] [war:war]\n[INFO] Exploding webapp...\n[INFO] Copy webapp webResources to /opt/continuum-1.0.3/apps/continuum/working-directory/55/target/ROOT\n[INFO] Copy webapp webResources to /opt/continuum-1.0.3/apps/continuum/working-directory/55/target/ROOT\n[INFO] Assembling webapp tesis in /opt/continuum-1.0.3/apps/continuum/working-directory/55/target/ROOT\n[INFO] Generating war /opt/continuum-1.0.3/apps/continuum/working-directory/55/target/ROOT.war\n[INFO] Building war: /opt/continuum-1.0.3/apps/continuum/working-directory/55/target/ROOT.war\n[INFO] ------------------------------------------------------------------------\n[ERROR] BUILD ERROR\n[INFO] ------------------------------------------------------------------------\n[INFO] Error assembling WAR: Problem creating war: /opt/continuum-1.0.3/apps/continuum/working-directory/55/target/ROOT/WEB-INF/lib/XmlSchema-1.1.jar (Too many open files)\n\n[INFO] ------------------------------------------------------------------------\n[INFO] Trace\norg.apache.maven.lifecycle.LifecycleExecutionException: Error assembling WAR: Problem creating war: /opt/continuum-1.0.3/apps/continuum/working-directory/55/target/ROOT/WEB-INF/lib/XmlSchema-1.1.jar (Too many open files)\nat org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:559)\nat org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalWithLifecycle(DefaultLifecycleExecutor.java:475)\nat org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoal(DefaultLifecycleExecutor.java:454)\nat org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalAndHandleFailures(DefaultLifecycleExecutor.java:306)\nat org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeTaskSegments(DefaultLifecycleExecutor.java:273)\nat org.apache.maven.lifecycle.DefaultLifecycleExecutor.execute(DefaultLifecycleExecutor.java:140)\nat org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:322)\nat org.apache.maven.DefaultMaven.execute(DefaultMaven.java:115)\nat org.apache.maven.cli.MavenCli.main(MavenCli.java:256)\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\nat java.lang.reflect.Method.invoke(Method.java:585)\nat org.codehaus.classworlds.Launcher.launchEnhanced(Launcher.java:315)\nat org.codehaus.classworlds.Launcher.launch(Launcher.java:255)\nat org.codehaus.classworlds.Launcher.mainWithExitCode(Launcher.java:430)\nat org.codehaus.classworlds.Launcher.main(Launcher.java:375)\nCaused by: org.apache.maven.plugin.MojoExecutionException: Error assembling WAR: Problem creating war: /opt/continuum-1.0.3/apps/continuum/working-directory/55/target/ROOT/WEB-INF/lib/XmlSchema-1.1.jar (Too many open files)\nat org.apache.maven.plugin.war.WarMojo.execute(WarMojo.java:149)\nat org.apache.maven.plugin.DefaultPluginManager.executeMojo(DefaultPluginManager.java:412)\nat org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:534)\n... 16 more\nCaused by: org.codehaus.plexus.archiver.ArchiverException: Problem creating war: /opt/continuum-1.0.3/apps/continuum/working-directory/55/target/ROOT/WEB-INF/lib/XmlSchema-1.1.jar (Too many open files)\nat org.codehaus.plexus.archiver.zip.AbstractZipArchiver.createArchiveMain(AbstractZipArchiver.java:403)\nat org.codehaus.plexus.archiver.zip.AbstractZipArchiver.createArchive(AbstractZipArchiver.java:229)\nat org.apache.maven.archiver.MavenArchiver.createArchive(MavenArchiver.java:332)\nat org.apache.maven.plugin.war.WarMojo.performPackaging(WarMojo.java:183)\nat org.apache.maven.plugin.war.WarMojo.execute(WarMojo.java:133)\n... 18 more\nCaused by: java.io.FileNotFoundException: /opt/continuum-1.0.3/apps/continuum/working-directory/55/target/ROOT/WEB-INF/lib/XmlSchema-1.1.jar (Too many open files)\nat java.io.FileInputStream.open(Native Method)\nat java.io.FileInputStream.(FileInputStream.java:106)\nat org.codehaus.plexus.archiver.zip.AbstractZipArchiver.zipFile(AbstractZipArchiver.java:679)\nat org.codehaus.plexus.archiver.zip.AbstractZipArchiver.addResources(AbstractZipArchiver.java:492)\nat org.codehaus.plexus.archiver.zip.AbstractZipArchiver.createArchiveMain(AbstractZipArchiver.java:330)\n... 22 more\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time: 3 minutes 54 seconds\n[INFO] Finished at: Thu Apr 19 14:26:45 CEST 2007\n[INFO] Final Memory: 106M/209M\n[INFO] --","priority":{"self":"http://jira.codehaus.org/rest/api/2/priority/3","iconUrl":"http://jira.codehaus.org/images/icons/priorities/major.png","name":"Major","id":"3"},"duedate":null,"issuelinks":[],"customfield_10163":"177724800","watches":{"self":"http://jira.codehaus.org/rest/api/2/issue/PLXUTILS-112/watchers","watchCount":4,"isWatching":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"subtasks":[],"status":{"self":"http://jira.codehaus.org/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"http://jira.codehaus.org/images/icons/statuses/closed.png","name":"Closed","id":"6"},"customfield_10090":null,"labels":[],"workratio":-1,"assignee":{"self":"http://jira.codehaus.org/rest/api/2/user?username=evenisse","name":"evenisse","emailAddress":"emmanuel.venisse@gmail.com","avatarUrls":{"16x16":"http://jira.codehaus.org/secure/useravatar?size=xsmall&avatarId=10232","24x24":"http://jira.codehaus.org/secure/useravatar?size=small&avatarId=10232","32x32":"http://jira.codehaus.org/secure/useravatar?size=medium&avatarId=10232","48x48":"http://jira.codehaus.org/secure/useravatar?avatarId=10232"},"displayName":"Emmanuel Venisse","active":true},"attachment":[{"self":"http://jira.codehaus.org/rest/api/2/attachment/41385","id":"41385","filename":"Main.java","author":{"self":"http://jira.codehaus.org/rest/api/2/user?username=rt15","name":"rt15","emailAddress":"rt15@voila.fr","avatarUrls":{"16x16":"http://jira.codehaus.org/secure/useravatar?size=xsmall&avatarId=10232","24x24":"http://jira.codehaus.org/secure/useravatar?size=small&avatarId=10232","32x32":"http://jira.codehaus.org/secure/useravatar?size=medium&avatarId=10232","48x48":"http://jira.codehaus.org/secure/useravatar?avatarId=10232"},"displayName":"rt15","active":true},"created":"2009-04-16T07:43:54.401-0500","size":1864,"mimeType":"java/*","content":"http://jira.codehaus.org/secure/attachment/41385/Main.java"}],"customfield_10221":null,"customfield_10220":null,"customfield_10200":null,"aggregatetimeestimate":null,"customfield_10190":null,"project":{"self":"http://jira.codehaus.org/rest/api/2/project/11432","id":"11432","key":"PLXUTILS","name":"Plexus Utils","avatarUrls":{"16x16":"http://jira.codehaus.org/secure/projectavatar?size=xsmall&pid=11432&avatarId=10011","24x24":"http://jira.codehaus.org/secure/projectavatar?size=small&pid=11432&avatarId=10011","32x32":"http://jira.codehaus.org/secure/projectavatar?size=medium&pid=11432&avatarId=10011","48x48":"http://jira.codehaus.org/secure/projectavatar?pid=11432&avatarId=10011"},"projectCategory":{"self":"http://jira.codehaus.org/rest/api/2/projectCategory/10003","id":"10003","description":"various containers","name":"containers"}},"versions":[],"customfield_10170":null,"environment":"debian stable","timeestimate":null,"customfield_10130":null,"aggregateprogress":{"progress":0,"total":0},"lastViewed":null,"components":[],"comment":{"startAt":0,"maxResults":4,"total":4,"comments":[{"self":"http://jira.codehaus.org/rest/api/2/issue/50086/comment/125646","id":"125646","author":{"self":"http://jira.codehaus.org/rest/api/2/user?username=silas1106","name":"silas1106","emailAddress":"silas1106@gmail.com","avatarUrls":{"16x16":"http://jira.codehaus.org/secure/useravatar?size=xsmall&avatarId=10232","24x24":"http://jira.codehaus.org/secure/useravatar?size=small&avatarId=10232","32x32":"http://jira.codehaus.org/secure/useravatar?size=medium&avatarId=10232","48x48":"http://jira.codehaus.org/secure/useravatar?avatarId=10232"},"displayName":"Eping","active":true},"body":"Getting the same exception, but not from using the archiver:\r\n\r\n77237724 [pool-1-thread-1] INFO  org.apache.maven.continuum.buildcontroller.BuildController:default  - Initializing build\r\n77237736 [pool-1-thread-1] INFO  org.apache.maven.continuum.buildcontroller.BuildController:default  - Starting build of Smartplanner\r\n77237885 [pool-1-thread-1] INFO  org.apache.maven.continuum.buildcontroller.BuildController:default  - Updating working dir\r\n77237886 [pool-1-thread-1] INFO  org.apache.maven.continuum.buildcontroller.BuildController:default  - Performing action check-working-directory\r\n77237887 [pool-1-thread-1] INFO  org.apache.maven.continuum.buildcontroller.BuildController:default  - Performing action update-working-directory-from-scm\r\n77237914 [pool-1-thread-1] INFO  org.apache.maven.continuum.scm.ContinuumScm:default  - Updating project: id: '6', name 'aProject'.\r\n77238021 [pool-1-thread-1] INFO  org.apache.maven.scm.manager.ScmManager:default  - Executing: /bin/sh -c \"cd /home/build/continuum-1.1/apps/continuum/webapp/WEB-INF/working-directory/6 && svn --username build\r\ns --non-interactive update\"\r\n77238022 [pool-1-thread-1] INFO  org.apache.maven.scm.manager.ScmManager:default  - Working directory: /home/build/continuum-1.1/apps/continuum/webapp/WEB-INF/working-directory/6\r\n77238372 [pool-1-thread-1] ERROR org.codehaus.plexus.taskqueue.execution.TaskQueueExecutor:build-project  - Error executing task\r\norg.codehaus.plexus.taskqueue.execution.TaskExecutionException: SCM error while executing 'update-working-directory-from-scm'\r\n        at org.apache.maven.continuum.buildcontroller.DefaultBuildController.performAction(DefaultBuildController.java:430)\r\n        at org.apache.maven.continuum.buildcontroller.DefaultBuildController.updateWorkingDirectory(DefaultBuildController.java:380)\r\n        at org.apache.maven.continuum.buildcontroller.DefaultBuildController.build(DefaultBuildController.java:112)\r\n        at org.apache.maven.continuum.buildcontroller.BuildProjectTaskExecutor.executeTask(BuildProjectTaskExecutor.java:50)\r\n        at org.codehaus.plexus.taskqueue.execution.ThreadedTaskQueueExecutor$ExecutorRunnable$1.run(ThreadedTaskQueueExecutor.java:116)\r\n        at edu.emory.mathcs.backport.java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:442)\r\n        at edu.emory.mathcs.backport.java.util.concurrent.FutureTask.run(FutureTask.java:176)\r\n        at edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:665)\r\n        at edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:690)\r\n        at java.lang.Thread.run(Thread.java:595)\r\nCaused by: org.apache.maven.continuum.scm.ContinuumScmException: Error while update sources.\r\n        at org.apache.maven.continuum.scm.DefaultContinuumScm.updateProject(DefaultContinuumScm.java:285)\r\n        at org.apache.maven.continuum.core.action.UpdateWorkingDirectoryFromScmContinuumAction.execute(UpdateWorkingDirectoryFromScmContinuumAction.java:75)\r\n        at org.apache.maven.continuum.buildcontroller.DefaultBuildController.performAction(DefaultBuildController.java:408)\r\n        ... 9 more\r\nCaused by: org.apache.maven.scm.ScmException: Exception while executing SCM command.\r\n        at org.apache.maven.scm.command.AbstractCommand.execute(AbstractCommand.java:62)\r\n        at org.apache.maven.scm.provider.svn.AbstractSvnScmProvider.executeCommand(AbstractSvnScmProvider.java:371)\r\n        at org.apache.maven.scm.provider.svn.AbstractSvnScmProvider.update(AbstractSvnScmProvider.java:362)\r\n        at org.apache.maven.scm.provider.AbstractScmProvider.update(AbstractScmProvider.java:931)\r\n        at org.apache.maven.scm.provider.AbstractScmProvider.update(AbstractScmProvider.java:906)\r\n        at org.apache.maven.scm.provider.AbstractScmProvider.update(AbstractScmProvider.java:878)\r\n        at org.apache.maven.continuum.scm.DefaultContinuumScm.updateProject(DefaultContinuumScm.java:255)\r\n        ... 11 more\r\nCaused by: org.apache.maven.scm.ScmException: Error while executing command.\r\n        at org.apache.maven.scm.provider.svn.svnexe.command.update.SvnUpdateCommand.executeUpdateCommand(SvnUpdateCommand.java:72)\r\n        at org.apache.maven.scm.command.update.AbstractUpdateCommand.executeCommand(AbstractUpdateCommand.java:62)\r\n        at org.apache.maven.scm.command.AbstractCommand.execute(AbstractCommand.java:58)\r\n        ... 17 more\r\nCaused by: org.codehaus.plexus.util.cli.CommandLineException: Error while executing process.\r\n        at org.codehaus.plexus.util.cli.Commandline.execute(Commandline.java:652)\r\n        at org.codehaus.plexus.util.cli.CommandLineUtils.executeCommandLine(CommandLineUtils.java:102)\r\n        at org.codehaus.plexus.util.cli.CommandLineUtils.executeCommandLine(CommandLineUtils.java:89)\r\n        at org.apache.maven.scm.provider.svn.svnexe.command.SvnCommandLineUtils.execute(SvnCommandLineUtils.java:126)\r\n        at org.apache.maven.scm.provider.svn.svnexe.command.update.SvnUpdateCommand.executeUpdateCommand(SvnUpdateCommand.java:68)\r\n        ... 19 more\r\nCaused by: java.io.IOException: java.io.IOException: Too many open files\r\n        at java.lang.UNIXProcess.<init>(UNIXProcess.java:148)\r\n        at java.lang.ProcessImpl.start(ProcessImpl.java:65)\r\n        at java.lang.ProcessBuilder.start(ProcessBuilder.java:451)\r\n        at java.lang.Runtime.exec(Runtime.java:591)\r\n        at org.codehaus.plexus.util.cli.Commandline.execute(Commandline.java:647)\r\n        ... 23 more\r\n\r\n","updateAuthor":{"self":"http://jira.codehaus.org/rest/api/2/user?username=silas1106","name":"silas1106","emailAddress":"silas1106@gmail.com","avatarUrls":{"16x16":"http://jira.codehaus.org/secure/useravatar?size=xsmall&avatarId=10232","24x24":"http://jira.codehaus.org/secure/useravatar?size=small&avatarId=10232","32x32":"http://jira.codehaus.org/secure/useravatar?size=medium&avatarId=10232","48x48":"http://jira.codehaus.org/secure/useravatar?avatarId=10232"},"displayName":"Eping","active":true},"created":"2008-02-29T12:46:36.207-0600","updated":"2008-02-29T12:46:36.207-0600"},{"self":"http://jira.codehaus.org/rest/api/2/issue/50086/comment/173149","id":"173149","author":{"self":"http://jira.codehaus.org/rest/api/2/user?username=rt15","name":"rt15","emailAddress":"rt15@voila.fr","avatarUrls":{"16x16":"http://jira.codehaus.org/secure/useravatar?size=xsmall&avatarId=10232","24x24":"http://jira.codehaus.org/secure/useravatar?size=small&avatarId=10232","32x32":"http://jira.codehaus.org/secure/useravatar?size=medium&avatarId=10232","48x48":"http://jira.codehaus.org/secure/useravatar?avatarId=10232"},"displayName":"rt15","active":true},"body":"Hi (And sorry for my horrible english),\r\n\r\nI also get this error...\r\n\r\nIt seems that it is linked to a well known issue :\r\nhttp://stuffthathappens.com/blog/2007/11/28/crash-boom-too-many-open-files/\r\nhttp://dlinsin.blogspot.com/2007/02/javas-runtimeexec-openes-too-many-files.html\r\nhttp://bytes.com/groups/java/18019-java-io-exception-too-many-open-files-sun-os-5-6-a\r\n\r\nI reproduced with following code, which look likes ArchiveEntryUtils.chmod (Decompiled) :\r\n\r\nimport org.codehaus.plexus.util.cli.*;\r\n \r\npublic class Main\r\n{\r\n \r\n     public static void chmod()\r\n         throws Exception\r\n     {\r\n         try\r\n         {\r\n             Commandline commandline = new Commandline();\r\n             commandline.setExecutable(\"netstat\");\r\n             org.codehaus.plexus.util.cli.CommandLineUtils.StringStreamConsumer stderr = new org.codehaus.plexus.util.cli.CommandLineUtils.StringStreamConsumer();\r\n             org.codehaus.plexus.util.cli.CommandLineUtils.StringStreamConsumer stdout = new org.codehaus.plexus.util.cli.CommandLineUtils.StringStreamConsumer();\r\n             int exitCode = CommandLineUtils.executeCommandLine(commandline, stderr, stdout);\r\n             if(exitCode != 0)\r\n             {\r\n                 System.out.println(\"-------------------------------\");\r\n                 System.out.println(\"Standard error:\");\r\n                 System.out.println(\"-------------------------------\");\r\n                 System.out.println(stderr.getOutput());\r\n                 System.out.println(\"-------------------------------\");\r\n                 System.out.println(\"Standard output:\");\r\n                 System.out.println(\"-------------------------------\");\r\n                 System.out.println(stdout.getOutput());\r\n                 System.out.println(\"-------------------------------\");\r\n                 throw new Exception(\"chmod exit code was: \" + exitCode);\r\n             }\r\n         }\r\n         catch(CommandLineException e)\r\n         {\r\n             throw new Exception(\"Error while executing chmod.\", e);\r\n         }\r\n     }\r\n \r\n /**\r\n  * @param args\r\n  */\r\n public static void main(String[] args)\r\n {\r\n  int i = 0;\r\n  try\r\n  {\r\n   while (true)\r\n   {\r\n    chmod();\r\n    Thread.sleep(1);\r\n    System.out.println(i);\r\n    i++;\r\n   } \r\n  }\r\n  catch (Exception e)\r\n  {\r\n   e.printStackTrace();\r\n  }\r\n }\r\n}\r\n\r\nHere is the error message, on a 32 bit linux with an 1.5.0 jre (Not reproduced on XP) :\r\n\r\n9411\r\n9412\r\n9413\r\n9414\r\n9415\r\njava.lang.Exception: Error while executing chmod.\r\n        at Main.chmod(Main.java:32)\r\n        at Main.main(Main.java:46)\r\nCaused by: org.codehaus.plexus.util.cli.CommandLineException: Error while executing process.\r\n        at org.codehaus.plexus.util.cli.Commandline.execute(Commandline.java:658)\r\n        at org.codehaus.plexus.util.cli.CommandLineUtils.executeCommandLine(CommandLineUtils.java:118)\r\n        at org.codehaus.plexus.util.cli.CommandLineUtils.executeCommandLine(CommandLineUtils.java:93)\r\n        at Main.chmod(Main.java:15)\r\n        ... 1 more\r\nCaused by: java.io.IOException: java.io.IOException: Too many open files\r\n        at java.lang.UNIXProcess.<init>(UNIXProcess.java:148)\r\n        at java.lang.ProcessImpl.start(ProcessImpl.java:65)\r\n        at java.lang.ProcessBuilder.start(ProcessBuilder.java:451)\r\n        at java.lang.Runtime.exec(Runtime.java:591)\r\n        at java.lang.Runtime.exec(Runtime.java:507)\r\n        at org.codehaus.plexus.util.cli.Commandline.execute(Commandline.java:638)\r\n        ... 4 more\r\n\r\nWith lsof Linux command, I see that there are more and more openned pipes :\r\n\r\njava    12154 brbo    0u   CHR 136,11                 13 /dev/pts/11\r\njava    12154 brbo    1u   CHR 136,11                 13 /dev/pts/11\r\njava    12154 brbo    2u   CHR 136,11                 13 /dev/pts/11\r\njava    12154 brbo    4w  FIFO    0,5          284090336 pipe\r\njava    12154 brbo    5w  FIFO    0,5          284090372 pipe\r\njava    12154 brbo    6r  FIFO    0,5          284090373 pipe\r\njava    12154 brbo    7w  FIFO    0,5          284090377 pipe\r\njava    12154 brbo    8r  FIFO    0,5          284090374 pipe\r\njava    12154 brbo    9w  FIFO    0,5          284090415 pipe\r\njava    12154 brbo   10r  FIFO    0,5          284090416 pipe\r\njava    12154 brbo   11w  FIFO    0,5          284090420 pipe\r\njava    12154 brbo   12r  FIFO    0,5          284090417 pipe\r\njava    12154 brbo   13w  FIFO    0,5          284090457 pipe\r\njava    12154 brbo   14r  FIFO    0,5          284090458 pipe\r\n...\r\njava    12154 brbo  528r  FIFO    0,5          284089024 pipe\r\njava    12154 brbo  530r  FIFO    0,5          284089025 pipe\r\njava    12154 brbo  531w  FIFO    0,5          284090330 pipe\r\njava    12154 brbo  532r  FIFO    0,5          284090331 pipe\r\njava    12154 brbo  534r  FIFO    0,5          284090332 pipe\r\n\r\nI think the problem is in CommandLineUtils.execute.\r\nHere is the creation :\r\n\r\n        Process p = cl.execute();\r\n        processes.put(new Long(cl.getPid()), p);\r\n        StreamFeeder inputFeeder = null;\r\n        if(systemIn != null)\r\n            inputFeeder = new StreamFeeder(systemIn, p.getOutputStream());\r\n        StreamPumper outputPumper = new StreamPumper(p.getInputStream(), systemOut);\r\n        StreamPumper errorPumper = new StreamPumper(p.getErrorStream(), systemErr);\r\n\r\n(See the strange Input <-> Output peers...)\r\n\r\nFrom my links above, following streams must be closed :\r\np.getInputStream()\r\np.getOutputStream()\r\np.getErrorStream()\r\n\r\n(Perhaps p.destroy() do this job).\r\n\r\nBut at the end of execute method, there is :\r\n\r\n        finally\r\n        {\r\n            if(inputFeeder != null)\r\n                inputFeeder.close();\r\n            outputPumper.close();\r\n            errorPumper.close();\r\n        }\r\n\r\n(StreamPumper and StreamFeeder close the associated streams)\r\nIf systemIn is null (Which is the case with my example above), p.getOutputStream() is never closed.\r\nMaybe it is the bug.","updateAuthor":{"self":"http://jira.codehaus.org/rest/api/2/user?username=rt15","name":"rt15","emailAddress":"rt15@voila.fr","avatarUrls":{"16x16":"http://jira.codehaus.org/secure/useravatar?size=xsmall&avatarId=10232","24x24":"http://jira.codehaus.org/secure/useravatar?size=small&avatarId=10232","32x32":"http://jira.codehaus.org/secure/useravatar?size=medium&avatarId=10232","48x48":"http://jira.codehaus.org/secure/useravatar?avatarId=10232"},"displayName":"rt15","active":true},"created":"2009-04-16T07:41:02.083-0500","updated":"2009-04-16T07:41:02.083-0500"},{"self":"http://jira.codehaus.org/rest/api/2/issue/50086/comment/173151","id":"173151","author":{"self":"http://jira.codehaus.org/rest/api/2/user?username=rt15","name":"rt15","emailAddress":"rt15@voila.fr","avatarUrls":{"16x16":"http://jira.codehaus.org/secure/useravatar?size=xsmall&avatarId=10232","24x24":"http://jira.codehaus.org/secure/useravatar?size=small&avatarId=10232","32x32":"http://jira.codehaus.org/secure/useravatar?size=medium&avatarId=10232","48x48":"http://jira.codehaus.org/secure/useravatar?avatarId=10232"},"displayName":"rt15","active":true},"body":"Sorry for the badly formatted code in my previous post. See the attached file.","updateAuthor":{"self":"http://jira.codehaus.org/rest/api/2/user?username=rt15","name":"rt15","emailAddress":"rt15@voila.fr","avatarUrls":{"16x16":"http://jira.codehaus.org/secure/useravatar?size=xsmall&avatarId=10232","24x24":"http://jira.codehaus.org/secure/useravatar?size=small&avatarId=10232","32x32":"http://jira.codehaus.org/secure/useravatar?size=medium&avatarId=10232","48x48":"http://jira.codehaus.org/secure/useravatar?avatarId=10232"},"displayName":"rt15","active":true},"created":"2009-04-16T07:43:54.410-0500","updated":"2009-04-16T07:43:54.410-0500"},{"self":"http://jira.codehaus.org/rest/api/2/issue/50086/comment/178499","id":"178499","author":{"self":"http://jira.codehaus.org/rest/api/2/user?username=evenisse","name":"evenisse","emailAddress":"emmanuel.venisse@gmail.com","avatarUrls":{"16x16":"http://jira.codehaus.org/secure/useravatar?size=xsmall&avatarId=10232","24x24":"http://jira.codehaus.org/secure/useravatar?size=small&avatarId=10232","32x32":"http://jira.codehaus.org/secure/useravatar?size=medium&avatarId=10232","48x48":"http://jira.codehaus.org/secure/useravatar?avatarId=10232"},"displayName":"Emmanuel Venisse","active":true},"body":"Fixed in r.8235","updateAuthor":{"self":"http://jira.codehaus.org/rest/api/2/user?username=evenisse","name":"evenisse","emailAddress":"emmanuel.venisse@gmail.com","avatarUrls":{"16x16":"http://jira.codehaus.org/secure/useravatar?size=xsmall&avatarId=10232","24x24":"http://jira.codehaus.org/secure/useravatar?size=small&avatarId=10232","32x32":"http://jira.codehaus.org/secure/useravatar?size=medium&avatarId=10232","48x48":"http://jira.codehaus.org/secure/useravatar?avatarId=10232"},"displayName":"Emmanuel Venisse","active":true},"created":"2009-05-28T16:45:58.005-0500","updated":"2009-05-28T16:45:58.005-0500"}]},"timeoriginalestimate":null,"aggregatetimespent":null}}